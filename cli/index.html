<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Command line interface - PatientMatcher documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Command line interface";
        var mkdocs_page_input_path = "cli.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> PatientMatcher documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../docker_app/">Docker-based application</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../conda_inst/">Installing the application on a conda environment</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../data_types/">Data types</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Command line interface</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#adding-demo-data-to-server">Adding demo data to server</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#removing-a-patient-from-the-database">Removing a patient from the database.</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#updating-patients-contact-info-using-the-command-line">Updating patients' contact info using the command line</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#adding-a-client-to-the-database">Adding a client to the database</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#adding-a-connected-node-to-the-database">Adding a connected node to the database</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../phenotype_resources/">Phenotype resource files</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../endpoints/">Server endpoints</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../algorithm/">Matching algrorithm</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../matching_emails/">Matching notifications</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../error_emails/">Server error notifications</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">PatientMatcher documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Command line interface</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="command-line-interface">Command line interface</h2>
<p>A list of available commands can be invoked by running the following command:</p>
<pre><code class="language-bash">pmatcher
</code></pre>
<p>&nbsp;&nbsp;</p>
<p><a name="cli_add_demo"></a></p>
<h3 id="adding-demo-data-to-server">Adding demo data to server</h3>
<p>For testing purposes you can upload a list of <a href="https://github.com/ga4gh/mme-apis/tree/master/testing">50 benchmarking patients</a>.&nbsp;
To add these patients to the database run the following command:</p>
<pre><code class="language-bash">pmatcher add demodata
</code></pre>
<p>Please note that the list of benchmarking patients all gene ids are represented as HGNC gene symbols.
The command above will convert gene symbols to Ensembl ids, in accordance to the GA4GH API: https://github.com/ga4gh/mme-apis/blob/master/search-api.md.</p>
<p>The above command will also load a demo client with token <code>DEMO</code> into the database
&nbsp;&nbsp;</p>
<p><a name="cli_remove_patient"></a></p>
<h3 id="removing-a-patient-from-the-database">Removing a patient from the database.</h3>
<p>You can remove a patient using the command line interface by invoking this command and providing <strong>either its ID or its label</strong> (or both actually):</p>
<pre><code class="language-bash">pmatcher remove patient [OPTIONS]

Options:
--id TEXT     ID of the patient to be removed from database
--label TEXT  label of the patient to be removed from database
</code></pre>
<p>&nbsp;&nbsp;</p>
<p><a name="cli_update_contacts"></a></p>
<h3 id="updating-patients-contact-info-using-the-command-line">Updating patients' contact info using the command line</h3>
<p>Contact information is a mandatory descriptor for each patient and represents the primary contact email address or URL used when looking for additional information for a patient in case of positive matches triggered by other patients from external nodes or the same database. A patient contact is described in PatientMatcher (and in the MatchMaker Exchange API) by these key/values:</p>
<ul>
<li><strong>href</strong>: a string represented by a URL (example: http://www.ncbi.nlm.nih.gov/pubmed/23542699) or the email address of the contact user (example: mailto:someone@somesite.com). This field is mandatory.</li>
<li><strong>name</strong>: complete name of the contact user responsible for the patient saved in the MatchMaker. This field is mandatory.</li>
<li><strong>institution</strong>: the Institution the contact person for the patients belongs to. This information is optional.</li>
</ul>
<p>The command to update patients' contact info is the following:</p>
<pre><code class="language-bash">pmatcher update contact [OPTIONS]

  Update contact person for a group of patients

Options:
  --old-href TEXT     Old contact href  [required]
  --href TEXT         New contact href  [required]
  --name TEXT         New contact name  [required]
  --institution TEXT  New contact institution
</code></pre>
<p>Let's assume a group of patients has a contact <code>Peter Parker</code> with href <code>mailto:pparker@example.com</code>. To replace the old user contact in <strong>all patients</strong> with the new contact info, for instance <code>Bruce Wayne</code>, type:</p>
<pre><code class="language-bash">pmatcher update contact --old-href maito:pparker@example.com --href mailto:bwayne@example.com -name &quot;Bruce Wayne&quot; -institution &quot;Wayne Enterprises, Inc.&quot;
</code></pre>
<p><a name="cli_add_client"></a></p>
<h3 id="adding-a-client-to-the-database">Adding a client to the database</h3>
<p>In order to save patients into patientMatcher you need to create at least one authorized client.&nbsp;
Use the following command to insert a client object in the database:</p>
<pre><code class="language-bash">pmatcher add client [OPTIONS]

Options:
--id TEXT       Client ID  [required]
--token TEXT    Authorization token  [required]
--url TEXT      Client URL  [required]
--contact TEXT  Client email
</code></pre>
<p>POST request aimed at adding or modifying a patient in patientMatcher <strong>should be using a token</strong> from a client present in the database.&nbsp;
Clients may be from the command line with this command:</p>
<pre><code class="language-bash">pmatcher remove client --id client_id
</code></pre>
<p>&nbsp;&nbsp;</p>
<p><a name="cli_add_node"></a></p>
<h3 id="adding-a-connected-node-to-the-database">Adding a connected node to the database</h3>
<p>To connect to another MME node and submit requests to it you should know the authentication token to the other node.&nbsp;
You can add a node to the database by running the command:</p>
<pre><code class="language-bash">pmatcher add node [OPTIONS]

Options:
  --id TEXT                Server/Client ID  [required]
  --token TEXT             Authorization token  [required]
  --matching_url TEXT      URL to send match requests to  [required]
  --accepted_content TEXT  Accepted Content-Type  [required]
  --contact TEXT           An email address
</code></pre>
<p>Connected nodes may be removed any time using the command:&nbsp;</p>
<pre><code class="language-bash">pmatcher remove node --id node_id
</code></pre>
<p>&nbsp;&nbsp;</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../data_types/" class="btn btn-neutral float-left" title="Data types"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../phenotype_resources/" class="btn btn-neutral float-right" title="Phenotype resource files">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../data_types/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../phenotype_resources/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
